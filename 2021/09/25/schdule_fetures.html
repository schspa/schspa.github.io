<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2022-03-03 Thu 11:48 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Linux scheduled features</title>
<meta name="author" content="Schspa" />
<meta name="description" content="Linux scheduled features" />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="/images/rose-red.png" type="image/x-icon" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" integrity="sha256-sAcc18zvMnaJZrNT4v8J0T4HqzEUiUTlVFgDIywjQek=" crossorigin="anonymous">
<link rel="stylesheet" href="/css/animate.min.css" />
<link rel="stylesheet" href="/css/all.min.css" />
<link rel="stylesheet" type="text/css" href="/css/style.css" />
<link rel="stylesheet" type="text/css" href="/css/navbar.css" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha256-/hGxZHGQ57fXLp+NDusFZsZo/PG21Bp2+hXYV5a6w+g=" crossorigin="anonymous"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/darkreader.js"></script>
<script src="/user.config.js"></script>
<script src="/js/main.js"></script>
</head>
<body>
<div id="preamble" class="status">
<div class="mobile-container">
  <!-- Top Navigation Menu -->
  <div class="topnav">
    <div id="header">
      <a href="/" class="logo">Schspa's Blog</a>
      <a href="javascript:void(0);" class="icon" onclick="toggleheader()">
        <i class="fa fa-bars"></i>
      </a>
    </div>
    <div id="nav_headers">
      <a href="/sitemap.html" class="menu-item">Categories</a>
    </div>
  </div>
  <!-- End smartphone / tablet look -->
</div>

<header id="header" class="header">
  <div class="logo-wrapper">
    <a href="/" class="logo">Schspa's Blogs</a>
  </div>

  <nav class="site-navbar">
    <ul id="menu" class="menu">
      <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li>
      <li class="menu-item">
        <a class="menu-item-link" href="/sitemap.html">Categories</a>
      </li>
    </ul>
  </nav>
</header>
</div>
<div id="content" class="content">
<h1 class="title">Linux scheduled features</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org461b2b8">æŸ¥çœ‹ç³»ç»Ÿä¸­å¼€å¯çš„è°ƒåº¦ç‰¹æ€§</a></li>
<li><a href="#orgbd6b934">RT_RUNTIME_SHARE</a></li>
<li><a href="#orge9d655a">TTWU_QUEUE</a></li>
<li><a href="#org859ba12">GENTLE_FAIR_SLEEPERS</a></li>
</ul>
</div>
</div>

<div id="outline-container-org461b2b8" class="outline-2">
<h2 id="org461b2b8">æŸ¥çœ‹ç³»ç»Ÿä¸­å¼€å¯çš„è°ƒåº¦ç‰¹æ€§</h2>
<div class="outline-text-2" id="text-org461b2b8">
<p>
cat /sys/kernel/debug/sched_features<br>
</p>
</div>
</div>

<div id="outline-container-orgbd6b934" class="outline-2">
<h2 id="orgbd6b934">RT_RUNTIME_SHARE</h2>
<div class="outline-text-2" id="text-orgbd6b934">
<p>
å®šä¹‰ï¼š<a target="_blank" href="https://github.com/torvalds/linux/blob/b133f076639b918bb6ad157f6308b0f595058959/kernel/sched/features.h#L80">kernel source for RT_RUNTIME_SHARE</a><br>
<a target="_blank" href="https://github.com/torvalds/linux/blob/b133f076639b918bb6ad157f6308b0f595058959/kernel/sched/rt.c#L839">kernel source for balance_runtime</a><br>
   ç”±è¿™ä¸ªå‡½æ•°å¯çŸ¥ï¼Œå½“å¼€å¯RT_RUNTIME_SHAREå¹¶ä¸”rqè¿›ç¨‹è¿è¡Œçš„æ—¶é—´è¶…è¿‡å½“å‰runqueueçš„rt_runtimeæ—¶ï¼Œç³»ç»Ÿå°†é€šè¿‡ä»å…¶ä»–çš„cpuä¸ŠæŠ½å–ä¸€éƒ¨ä»½ä¹‹é—´åˆ†ç»™å½“å‰çš„rqã€‚å¼€å¯ä¹‹åï¼Œrt timeä»¥åŠrt_throttledçš„åˆ¤å®šå°±ä¼šå˜æˆå…±äº«æ‰€ç”±cpuæ‰€å ç”¨çš„æ‰§è¡Œæ—¶é—´ï¼Œä»è€Œå¯ä»¥ä½¿å•ä¸ªcpuçš„rtè¿›ç¨‹æ‰§è¡Œæ—¶é—´è¾¾åˆ°100%.<br>
   å¼€å¯è¿™ä¸ªfeatureæ—¶ï¼Œä¼šé€ æˆç”±äºRTçº¿ç¨‹BUGå¯¼è‡´å•ä¸ªCPUä¸€ç›´æ‰§è¡ŒRTè¿›ç¨‹(ç»‘å®šCPUçš„æƒ…å†µä¸‹)ï¼Œè€ŒæŠŠå…¶ä»–è¿›ç¨‹é¥¿æ­»ã€‚æœ€æ–°ç‰ˆçš„å†…æ ¸å·²ç»é»˜è®¤å…³é—­äº†è¿™ä¸ªfeature.<br>
   è¯¦æƒ…å‚è€ƒ<a href="https://www.mail-archive.com/linux-kernel@vger.kernel.org/msg2315022.html">https://www.mail-archive.com/linux-kernel@vger.kernel.org/msg2315022.html</a> è¿™ä¸ªpatchçš„commitä¿¡æ¯.<br>
</p>
</div>
</div>

<div id="outline-container-orge9d655a" class="outline-2">
<h2 id="orge9d655a">TTWU_QUEUE</h2>
<div class="outline-text-2" id="text-orge9d655a">
<p>
<a target="_blank" href="https://github.com/torvalds/linux/blob/b133f076639b918bb6ad157f6308b0f595058959/kernel/sched/features.h#L53">kernel source TTWU_QUEUE</a><br>
å½“å¼€å¯è¿™ä¸ªç‰¹æ€§æ—¶ï¼Œç³»ç»Ÿå°†é€šè¿‡ipiä¸­æ–­çš„æ–¹å¼æ¥å°†è¿›ç¨‹åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ï¼Œç”±æ­¤é¿å…å»åŠ rqé”<br>
<a target="_blank" href="https://github.com/torvalds/linux/blob/b133f076639b918bb6ad157f6308b0f595058959/kernel/sched/core.c#L3585">kernel source for rq_lock when task enqueue</a><br>
</p>


<p>
<a href="https://review.lineageos.org/c/LineageOS/android_kernel_essential_msm8998/+/208190/1">https://review.lineageos.org/c/LineageOS/android_kernel_essential_msm8998/+/208190/1</a><br>
</p>
</div>
</div>

<div id="outline-container-org859ba12" class="outline-2">
<h2 id="org859ba12">GENTLE_FAIR_SLEEPERS</h2>
<div class="outline-text-2" id="text-org859ba12">
<p>
<a target="_blank" href="https://github.com/torvalds/linux/blob/b133f076639b918bb6ad157f6308b0f595058959/kernel/sched/features.h#L7">kernel source for GENTLE_FAIR_SLEEPERS</a><br>
</p>

<p>
å†…æ ¸æ³¨é‡Š<br>
</p>
<blockquote>
<p>
Only give sleepers 50% of their service deficit. This allows them to run sooner, but does not allow tons of sleepers to rip the spread apart.<br>
</p>
</blockquote>
</div>
</div>
</div>
<div id="postamble" class="status">
<script src="https://utteranc.es/client.js"
    repo="schspa/schspa.github.io"
    issue-term="title"
    label="âœ¨ğŸ’¬âœ¨"
    theme="github-light"
    crossorigin="anonymous"
    async>
</script>
<div class="me">
  <span><b>Contact me via :)</b><span>
  <div class="contact">
    <a id="email" href="mailto:schspa@gmail.com" target="_blank"><i class="fab fa-mailchimp animated heartBeat delay-2s slower"></i></a>
    <a id="github" href="//github.com/schspa" target="_blank"><i class="fab fa-github animated heartBeat delay-2s slower"></i></a>
  </div>
</div>

<div id="jinrishici-sentence" style="font-weight: 700;">è™šæ€€ä¹ƒè‹¥è°·ï¼Œæ°´æ·±åˆ™æµç¼“ã€‚</div>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
</div>
</body>
</html>
