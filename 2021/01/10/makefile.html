<!DOCTYPE html>
<html lang="zh">
<head>
<!-- 2023-05-06 Sat 10:11 -->
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Makefile</title>
<meta name="author" content="Schspa" />
<meta name="description" content="Makefile" />
<meta name="generator" content="Org Mode" />
<link rel="shortcut icon" href="/images/rose-red.png" type="image/x-icon" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" integrity="sha256-sAcc18zvMnaJZrNT4v8J0T4HqzEUiUTlVFgDIywjQek=" crossorigin="anonymous">
<link rel="stylesheet" href="/css/animate.min.css" />
<link rel="stylesheet" href="/css/all.min.css" />
<link rel="stylesheet" type="text/css" href="/css/style.css" />
<link rel="stylesheet" type="text/css" href="/css/navbar.css" />
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha256-/hGxZHGQ57fXLp+NDusFZsZo/PG21Bp2+hXYV5a6w+g=" crossorigin="anonymous"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/darkreader.js"></script>
<script src="/user.config.js"></script>
<script src="/js/main.js"></script>
</head>
<body>
<div id="preamble" class="status">
<div class="mobile-container">
  <!-- Top Navigation Menu -->
  <div class="topnav">
    <div id="header">
      <a href="/" class="logo">Schspa's Blog</a>
      <a href="javascript:void(0);" class="icon" onclick="toggleheader()">
        <i class="fa fa-bars"></i>
      </a>
    </div>
    <div id="nav_headers">
      <a href="/sitemap.html" class="menu-item">Categories</a>
    </div>
  </div>
  <!-- End smartphone / tablet look -->
</div>

<header id="header" class="header">
  <div class="logo-wrapper">
    <a href="/" class="logo">Schspa's Blogs</a>
  </div>

  <nav class="site-navbar">
    <ul id="menu" class="menu">
      <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li>
      <li class="menu-item">
        <a class="menu-item-link" href="/sitemap.html">Categories</a>
      </li>
    </ul>
  </nav>
</header>
</div>
<div id="content" class="content">
<h1 class="title">Makefile</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org986fe11">Makefile中的变量</a>
<ul>
<li>
<ul>
<li><a href="#orgebc0c92">Makefile Test Source</a></li>
</ul>
</li>
<li><a href="#orga361ed3">Automatic Variables</a></li>
<li><a href="#org36cd379">$% The target member name, when the target is an archive member.</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org986fe11" class="outline-2">
<h2 id="org986fe11">Makefile中的变量</h2>
<div class="outline-text-2" id="text-org986fe11">
</div>
<div id="outline-container-orgebc0c92" class="outline-4">
<h4 id="orgebc0c92">Makefile Test Source</h4>
<div class="outline-text-4" id="text-orgebc0c92">
<div class="org-src-container">
<pre class="src src-makefile"><code><span class="org-makefile-targets">all</span>: aaa bbb ccc foo.a(bar.o)</code>
<code></code>
<code><span class="org-makefile-targets">ccc.o</span>:</code>
<code>    <span class="org-type">@</span></code>
<code></code>
<code><span class="org-makefile-targets">bar.o</span>:</code>
<code>    <span class="org-type">@</span></code>
<code></code>
<code><span class="org-makefile-targets">foo.a(bar.o ccc.o)</span>:</code>
<code>    <span class="org-type">@</span><span class="org-makefile-shell">echo </span><span class="org-string"><span class="org-makefile-shell">"\$$%"</span></span><span class="org-makefile-shell">  </span><span class="org-makefile-targets"><span class="org-makefile-shell">$</span></span><span class="org-makefile-targets"><span class="org-makefile-shell"><span class="org-constant">%</span></span></span></code>
<code></code>
<code><span class="org-makefile-targets">aaa bbb ccc</span>: bar.o ccc.o</code>
<code>    <span class="org-type">@</span><span class="org-makefile-shell">echo </span><span class="org-string"><span class="org-makefile-shell">"\$$@"</span></span><span class="org-makefile-shell">  </span><span class="org-makefile-targets"><span class="org-makefile-shell">$</span></span><span class="org-makefile-targets"><span class="org-makefile-shell"><span class="org-constant">@</span></span></span></code>
<code>    <span class="org-type">@</span><span class="org-makefile-shell">echo </span><span class="org-string"><span class="org-makefile-shell">"\$$&lt;"</span></span><span class="org-makefile-shell">  $</span><span class="org-makefile-shell"><span class="org-constant">&lt;</span></span></code>
<code>    <span class="org-type">@</span><span class="org-makefile-shell">echo </span><span class="org-string"><span class="org-makefile-shell">"\$$?"</span></span><span class="org-makefile-shell">  $</span><span class="org-makefile-shell"><span class="org-constant">?</span></span></code>
<code></code>
<code><span class="org-makefile-targets">b%b</span>:</code>
<code>    <span class="org-type">@</span><span class="org-makefile-shell">echo </span><span class="org-string"><span class="org-makefile-shell">"target: </span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-makefile-shell">$</span></span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-makefile-shell"><span class="org-constant">@</span></span></span></span><span class="org-string"><span class="org-makefile-shell">"</span></span><span class="org-makefile-shell"> pattern: b%b \$$*: </span><span class="org-makefile-targets"><span class="org-makefile-shell">$</span></span><span class="org-makefile-targets"><span class="org-makefile-shell"><span class="org-constant">*</span></span></span></code>
<code></code>
<code><span class="org-makefile-targets">c%c</span>:</code>
<code>    <span class="org-type">@</span><span class="org-makefile-shell">echo </span><span class="org-string"><span class="org-makefile-shell">"target: </span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-makefile-shell">$</span></span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-makefile-shell"><span class="org-constant">@</span></span></span></span><span class="org-string"><span class="org-makefile-shell">"</span></span><span class="org-makefile-shell"> pattern: c%c \$$*: </span><span class="org-makefile-targets"><span class="org-makefile-shell">$</span></span><span class="org-makefile-targets"><span class="org-makefile-shell"><span class="org-constant">*</span></span></span></code>
<code></code>
<code><span class="org-makefile-targets">%dd</span>:</code>
<code>    <span class="org-type">@</span><span class="org-makefile-shell">echo </span><span class="org-string"><span class="org-makefile-shell">"target: </span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-makefile-shell">$</span></span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-makefile-shell"><span class="org-constant">@</span></span></span></span><span class="org-string"><span class="org-makefile-shell">"</span></span><span class="org-makefile-shell"> pattern: %dd \$$*: </span><span class="org-makefile-targets"><span class="org-makefile-shell">$</span></span><span class="org-makefile-targets"><span class="org-makefile-shell"><span class="org-constant">*</span></span></span></code>
<code></code>
<code><span class="org-makefile-targets">%e</span>:</code>
<code>    <span class="org-type">@</span><span class="org-makefile-shell">echo </span><span class="org-string"><span class="org-makefile-shell">"target: </span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-makefile-shell">$</span></span></span><span class="org-makefile-targets"><span class="org-string"><span class="org-makefile-shell"><span class="org-constant">@</span></span></span></span><span class="org-string"><span class="org-makefile-shell">"</span></span><span class="org-makefile-shell"> pattern: %e \$$*: </span><span class="org-makefile-targets"><span class="org-makefile-shell">$</span></span><span class="org-makefile-targets"><span class="org-makefile-shell"><span class="org-constant">*</span></span></span></code>
<code></code>
<code><span class="org-makefile-targets">stem</span>: src/bbb src/ccc src/ddd src/eee</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-bash"><code>  make -f Makefile</code>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-org"><code>  <span class="org-org-table">| $@ | aaa   |       |</span></code>
<code>  <span class="org-org-table">| $&lt; | bar.o |       |</span></code>
<code>  <span class="org-org-table">| $? | bar.o | ccc.o |</span></code>
<code>  <span class="org-org-table">| $@ | bbb   |       |</span></code>
<code>  <span class="org-org-table">| $&lt; | bar.o |       |</span></code>
<code>  <span class="org-org-table">| $? | bar.o | ccc.o |</span></code>
<code>  <span class="org-org-table">| $@ | ccc   |       |</span></code>
<code>  <span class="org-org-table">| $&lt; | bar.o |       |</span></code>
<code>  <span class="org-org-table">| $? | bar.o | ccc.o |</span></code>
<code>  <span class="org-org-table">| $% | bar.o |       |</span></code>
</pre>
</div>
</div>
</div>


<div id="outline-container-orga361ed3" class="outline-3">
<h3 id="orga361ed3"><a href="https://www.gnu.org/software/make/manual/html_node/Automatic-Variables.html#Automatic-Variables">Automatic Variables</a></h3>
<div class="outline-text-3" id="text-orga361ed3">
<dl class="org-dl">
<dt>$@</dt><dd>目标文件名<br></dd>
<dt>$%</dt><dd>当目标是归档文件时，表示其目标成员名<br></dd>
<dt>$&lt;</dt><dd>第一个依赖的target名字<br></dd>
<dt>$?</dt><dd>所有的已经更新的依赖项<br></dd>
<dt>$^</dt><dd>所有的依赖项, 如果在依赖目标中有多个重复的，那个这个变量会去除重复的依赖目标，只保留一份。<br></dd>
<dt>$+</dt><dd>所有的依赖项, 不删除重复项<br></dd>
<dt>$|</dt><dd>所有的依赖项, 按照顺序排序<br></dd>
<dt>$*</dt><dd><p>
目标模式中 % 及其之前的部分<br>
匹配模式匹配到的词根<sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup><br>
当匹配模式不包含/时，匹配时将会首先去掉文件夹路径, 最后在形成词根(stem)时，又会把文件夹路径加上.<br>
所以在使用时应当避免使用前缀, 否则将很可能出现预料之外的$*变量值<br>
</p>
<div class="org-src-container">
<pre class="src src-bash"><code>     make -f Makefile stem</code>
</pre>
</div></dd>
</dl>
</div>
</div>

<div id="outline-container-org36cd379" class="outline-3">
<h3 id="org36cd379">$% The target member name, when the target is an archive member.</h3>
<div class="outline-text-3" id="text-org36cd379">
<p>
$% 当目标是归档文件时，<br>
</p>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">
: 词根，手册中的定义如下所示:<br>
</p>
<blockquote>
<p>
A target pattern is composed of a ‘%’ between a prefix and a suffix, either or both of which may be empty. The pattern matches a file name only if the file name starts with the prefix and ends with the suffix, without overlap. The text between the prefix and the suffix is called the stem.<br>
</p>
</blockquote></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<script src="https://utteranc.es/client.js"
    repo="schspa/schspa.github.io"
    issue-term="title"
    label="✨💬✨"
    theme="github-light"
    crossorigin="anonymous"
    async>
</script>
<div class="me">
  <span><b>Contact me via :)</b><span>
  <div class="contact">
    <a id="email" href="mailto:schspa@gmail.com" target="_blank"><i class="fab fa-mailchimp animated heartBeat delay-2s slower"></i></a>
    <a id="github" href="//github.com/schspa" target="_blank"><i class="fab fa-github animated heartBeat delay-2s slower"></i></a>
  </div>
</div>

<div id="jinrishici-sentence" style="font-weight: 700;">虚怀乃若谷，水深则流缓。</div>
<script src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script>
</div>
</body>
</html>